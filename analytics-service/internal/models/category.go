package models

// CategoryRange представляет диапазон процентов для категории
type CategoryRange struct {
	Name    string
	MinPerc float64
	MaxPerc float64
}

// SalaryBracket представляет диапазон зарплаты с соответствующими категориями
type SalaryBracket struct {
	MinSalary  float64
	MaxSalary  float64
	Categories []CategoryRange
}

// GetSalaryBrackets возвращает все диапазоны зарплат с рекомендациями по категориям
func GetSalaryBrackets() []SalaryBracket {
	return []SalaryBracket{
		{
			MinSalary: 0,
			MaxSalary: 20000,
			Categories: []CategoryRange{
				{"Продукты", 35, 45},
				{"Выплаты по кредитам", 0, 20},
				{"Транспорт", 5, 10},
				{"Жилье", 15, 25},
				{"Коммунальные услуги", 5, 10},
				{"Здоровье", 0, 5},
				{"Развлечения", 0, 3},
				{"Образование", 0, 3},
				{"Одежда", 0, 5},
				{"Кафе и рестораны", 0, 2},
				{"Путешествия", 0, 0},
				{"Спорт", 0, 2},
				{"Связь", 3, 5},
				{"Подарки", 0, 2},
				{"Другое", 0, 3},
			},
		},
		{
			MinSalary: 20000,
			MaxSalary: 50000,
			Categories: []CategoryRange{
				{"Продукты", 30, 40},
				{"Выплаты по кредитам", 0, 25},
				{"Транспорт", 5, 10},
				{"Жилье", 15, 25},
				{"Коммунальные услуги", 5, 8},
				{"Здоровье", 2, 5},
				{"Развлечения", 3, 7},
				{"Образование", 2, 5},
				{"Одежда", 3, 7},
				{"Кафе и рестораны", 2, 5},
				{"Путешествия", 0, 3},
				{"Спорт", 2, 4},
				{"Связь", 3, 5},
				{"Подарки", 2, 4},
				{"Другое", 2, 4},
			},
		},
		{
			MinSalary: 50000,
			MaxSalary: 100000,
			Categories: []CategoryRange{
				{"Продукты", 20, 30},
				{"Выплаты по кредитам", 0, 30},
				{"Транспорт", 5, 10},
				{"Жилье", 15, 25},
				{"Коммунальные услуги", 4, 7},
				{"Здоровье", 3, 6},
				{"Развлечения", 5, 10},
				{"Образование", 3, 7},
				{"Одежда", 4, 8},
				{"Кафе и рестораны", 5, 10},
				{"Путешествия", 3, 7},
				{"Спорт", 3, 6},
				{"Связь", 3, 5},
				{"Подарки", 3, 6},
				{"Другое", 3, 5},
			},
		},
		{
			MinSalary: 100000,
			MaxSalary: 150000,
			Categories: []CategoryRange{
				{"Продукты", 15, 25},
				{"Выплаты по кредитам", 0, 35},
				{"Транспорт", 5, 10},
				{"Жилье", 15, 25},
				{"Коммунальные услуги", 3, 6},
				{"Здоровье", 4, 7},
				{"Развлечения", 7, 12},
				{"Образование", 4, 8},
				{"Одежда", 4, 8},
				{"Кафе и рестораны", 7, 12},
				{"Путешествия", 5, 10},
				{"Спорт", 4, 7},
				{"Связь", 3, 5},
				{"Подарки", 3, 6},
				{"Другое", 3, 6},
			},
		},
		{
			MinSalary: 150000,
			MaxSalary: 250000,
			Categories: []CategoryRange{
				{"Продукты", 10, 20},
				{"Выплаты по кредитам", 0, 35},
				{"Транспорт", 5, 10},
				{"Жилье", 15, 25},
				{"Коммунальные услуги", 3, 5},
				{"Здоровье", 4, 8},
				{"Развлечения", 8, 15},
				{"Образование", 5, 10},
				{"Одежда", 5, 10},
				{"Кафе и рестораны", 8, 15},
				{"Путешествия", 7, 12},
				{"Спорт", 4, 8},
				{"Связь", 3, 5},
				{"Подарки", 3, 6},
				{"Другое", 3, 6},
			},
		},
		{
			MinSalary: 250000,
			MaxSalary: 400000,
			Categories: []CategoryRange{
				{"Продукты", 8, 15},
				{"Выплаты по кредитам", 0, 40},
				{"Транспорт", 5, 10},
				{"Жилье", 15, 25},
				{"Коммунальные услуги", 3, 5},
				{"Здоровье", 5, 10},
				{"Развлечения", 10, 18},
				{"Образование", 7, 12},
				{"Одежда", 5, 10},
				{"Кафе и рестораны", 10, 18},
				{"Путешествия", 8, 15},
				{"Спорт", 5, 8},
				{"Связь", 3, 5},
				{"Подарки", 4, 7},
				{"Другое", 3, 6},
			},
		},
		{
			MinSalary: 400000,
			MaxSalary: 999999999, // Максимальное значение для "400 000+"
			Categories: []CategoryRange{
				{"Продукты", 5, 12},
				{"Выплаты по кредитам", 0, 40},
				{"Транспорт", 5, 10},
				{"Жилье", 10, 20},
				{"Коммунальные услуги", 3, 5},
				{"Здоровье", 5, 12},
				{"Развлечения", 10, 20},
				{"Образование", 8, 15},
				{"Одежда", 5, 10},
				{"Кафе и рестораны", 10, 20},
				{"Путешествия", 10, 20},
				{"Спорт", 5, 8},
				{"Связь", 2, 4},
				{"Подарки", 5, 10},
				{"Другое", 3, 7},
			},
		},
	}
}

// GetBracketForSalary возвращает соответствующий диапазон зарплаты
func GetBracketForSalary(salary float64) *SalaryBracket {
	brackets := GetSalaryBrackets()
	for _, bracket := range brackets {
		if salary >= bracket.MinSalary && salary <= bracket.MaxSalary {
			return &bracket
		}
	}
	return nil
}
